<div class="login-container">
    <!-- Animated background -->
    <div class="background-animation">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
        <div class="floating-shape shape-4"></div>
        <div class="floating-shape shape-5"></div>
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <p-toast></p-toast>

    <div class="login-content">
        <!-- Left side - Branding -->
        <div class="branding-section">
            <div class="brand-content">
                <div class="logo-container">
                    <img
                        src="assets/logo/logo.png"
                        alt="Logo"
                        class="logo-image"
                    />
                    <div class="logo-glow"></div>
                </div>
                <h1 class="brand-title">
                    <span class="title-line">Data Cleaning for</span>
                    <span class="title-line highlight">Earthquake Loss</span>
                    <span class="title-line">Estimation</span>
                </h1>
                <p class="brand-subtitle">Data for a earthquake safe bhutan.</p>
                <div class="feature-highlights">
                    <div class="feature-item">
                        <i class="pi pi-shield feature-icon"></i>
                        <span> Data Cleaning</span>
                    </div>
                    <div class="feature-item">
                        <i class="pi pi-chart-line feature-icon"></i>
                        <span>Data Analytics</span>
                    </div>
                    <div class="feature-item">
                        <i class="pi pi-globe feature-icon"></i>
                        <span>ELE Report</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right side - Login form -->
        <div class="form-section">
            <div class="login-card">
                <div class="card-header">
                    <h2 class="welcome-title">Welcome Back</h2>
                    <p class="welcome-subtitle">
                        Please sign in to your account
                    </p>
                    <div class="auth-info">
                        <div class="info-item">
                            <strong>Username:</strong> Email address
                        </div>
                        <div class="info-item">
                            <strong>Password:</strong> Phone number
                        </div>
                        <div class="info-note">
                            * Based on nomination list provided
                        </div>
                    </div>
                </div>

                <div class="form-content" *ngIf="!this.token">
                    <div class="input-group">
                        <label for="email1" class="input-label">
                            <i class="pi pi-envelope"></i>
                            Email Address
                        </label>
                        <div class="input-wrapper">
                            <input
                                id="email1"
                                type="email"
                                placeholder="Enter your email"
                                pInputText
                                [(ngModel)]="username"
                                class="modern-input"
                            />
                            <div class="input-border"></div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="password1" class="input-label">
                            <i class="pi pi-lock"></i>
                            Password
                        </label>
                        <div class="input-wrapper p-fluid">
                            <p-password
                                id="password1"
                                [(ngModel)]="password"
                                placeholder="Enter your password"
                                [toggleMask]="true"
                                [feedback]="false"
                                fluid="true"
                                styleClass="modern-password"
                                inputStyleClass="modern-input"
                            ></p-password>
                            <div class="input-border"></div>
                        </div>
                    </div>

                    <div class="form-options">
                        <div class="remember-me">
                            <p-checkbox
                                id="rememberme1"
                                [binary]="true"
                                [(ngModel)]="remember"
                                styleClass="modern-checkbox"
                            ></p-checkbox>
                            <label for="rememberme1">Remember me</label>
                        </div>
                        <a href="#" class="forgot-password">Forgot password?</a>
                    </div>

                    <button
                        pButton
                        pRipple
                        (click)="login()"
                        class="login-button"
                        [disabled]="!username || !password"
                    >
                        <span class="button-text">Sign In</span>
                        <i class="pi pi-arrow-right button-icon"></i>
                        <div class="button-glow"></div>
                    </button>
                </div>

                <div class="welcome-back" *ngIf="this.token">
                    <div class="welcome-avatar">
                        <i class="pi pi-user"></i>
                    </div>
                    <h3 class="welcome-name">
                        Welcome back, {{ decodedToken.fullName }}!
                    </h3>
                    <p class="welcome-message">
                        You're already logged in and ready to continue
                    </p>

                    <button
                        pButton
                        pRipple
                        (click)="tokenExistsContinue()"
                        class="continue-button"
                    >
                        <span class="button-text">Continue</span>
                        <i class="pi pi-arrow-right button-icon"></i>
                    </button>

                    <div class="switch-user">
                        <span>Not {{ decodedToken.fullName }}?</span>
                        <a (click)="removeToken()" class="switch-link">
                            Switch Account
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
